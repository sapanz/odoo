<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

  <header t-name="wowl.NavBar" owl="1">
    <nav class="o_main_navbar">
      <t t-call="wowl.AppsMenu"/>
      <t t-if="state.currentApp" t-call="wowl.CurrentAppMenu"/>
      <div class="spacer" /> <!-- voir un peu comment faire ceci -->
      <t t-call="wowl.Systray"/>
    </nav>
  </header>

<ul t-name="wowl.AppsMenu" class="o_menu_apps" owl="1">
    <li class="dropdown">
        <a class="full" data-toggle="dropdown" data-display="static" href="#" t-on-click="toggleDropdownMenu">
            <i class="fa fa-th-large"/>
        </a>
        <div class="dropdown-menu" role="menu" t-att-class="{ show: state.showDropdownMenu }">
            <t t-foreach="menuRepo.getApps()" t-as="app" t-key="app.id">
                <a role="menuitem" href="#" class="dropdown-item o_app"
                    t-att-data-menu-id="app.id"
                    t-att-data-menu-xmlid="app.xmlid"
                    t-att-data-action-id="app.actionID"
                    t-on-click="_onMenuClicked(app)">
                        <t t-esc="app.name"/>
                </a>
            </t>
        </div>
    </li>
</ul>
  <Dropdown t-name="wowl.Dropdown" owl="1">
    <t t-set-slot="toggler">
      <i t-att-class="icon"/> <t t-esc="text"/>
    </t>
    <t t-set-slot="dropdown">
      <t t-foreach="items" t-as="item" t-key="item.id">
        <t t-if="item.children" t-call="wowl.Dropdown">
          <!-- <t t-set="icon" t-value="....." /> -->
          <t t-set="text" t-value="item.name" />
          <t t-set="items" t-value="item.children"/>
        </t>
        <t t-else="">
          <a class="dropdown-item" t-attf-href="{{item.url}}">
            <t t-esc="item.name"/>
          </a>
        </t>
  <t t-name="wowl.AppsMenu" owl="1">
    <Dropdown class="o_navbar_item o_menu_apps" icon="fa fa-th-large">
      <t t-foreach="state.appMenuItems" t-as="item" t-key="item.id">
        <DropdownItem id="item.id" title="item.name"/>
      </t>
    </Dropdown>
  </t>
    
  <t t-name="wowl.CurrentAppMenu" owl="1">
    <a class="o_navbar_item o_menu_brand" role="button" t-on-click="...">
      <t t-esc="state.currentApp.name"/>
    </a>
    <ul class="o_menu_sections" role="menu">
      <t t-call="wowl.MenuItems">
        <t t-set="menuItems" t-value="state.currentApp.children"/>
      </t>
    </ul>
  </t>
  
  <t t-name="wowl.Systray" owl="1">
    <ul class="o_menu_systray" role="menu">
      <t t-call="wowl.MenuItems">
        <t t-set="menuItems" t-value="state.systrayMenu.children" />
      </t>
    </ul>
  </t>

  <t t-name="wowl.MenuItems" owl="1">
    <li t-foreach="menuItems" t-as="menuItem">
      <t t-if="!menuItem.children.length">
        <a role="button" t-on-click="...">
          <t t-esc="menuItem.name" />
        </a>
      </t>
      <t t-else="">
        <Dropdown title="menuItem.Name">
          <t t-foreach="menuItem.children" t-as="item" t-key="item.id">
            <DropdownItem id="item.id" title="item.name"/>
          </t>
        </Dropdown>
      </t>
    </li>
  </t>

</templates>