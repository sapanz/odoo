<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0"> <!-- TODO noupdate -->
        <record id="partner_bank_account_changed_template" model="mail.template">
            <field name="name">Partner: bank account changed</field>
            <field name="model_id" ref="base.model_res_partner"/>
            <field name="auto_delete" eval="True"/>
            <field name="email_to">${ctx['user'].email}</field>
            <field name="subject">Warning: bank account of ${object.name} modified</field>
            <field name="body_html"><![CDATA[

                <p>Dear ${ctx['user'].name},<br/><br/>
                You receive this email because we would like to be sure that you are the person who changed the bank account of partner ${object.name}
                %if object.company_id:
                    in ${object.company_id.name}
                %endif
                at ${ctx['timestamp']}. If you don't remember doing such action, it means your user credentials might be in the hands of 
                a scammer. When they get user credentials, scammers common schemes are the following:</p>
                <ul>
                    <li>Changing the footer of your document layout to invite your customers to pay invoices on a scam bank account</li>
                    <li>Changing the bank account(s) of the company (same purpose). </li>
                    <li>Changing the bank account(s) fo your vendors so you pay your bills on a scam bank account. </li>
                </ul>
                    
                <p>That's why you will receive warning mails like this each time one of those actions is performed.</p>
                <p>If you think you are victim of a scam:</p>
                <ul>
                    <li>Change your user password (use a strong one). Also check that you don't use the same password for other purposes 
                        as well. Those accounts could be compromised as well.</li>
                    <li>Log in
                    %if object.company_id:
                        company ${object.company_id.name}
                    %endif
                    and have a look at partner <partner name>. Check if everything is correct with a particular focus on bank 
                        account numbers, make corrections where necessary.</li>
                    <li>If you had to fix the bank account, then check  no bills were created (or worse, paid) between
                        ${ctx['timestamp']} and now. Contact your partner if necessary.</li>
                </ul>]]>
            </field>
        </record>

        <record id="user_email_changed_template" model="mail.template">
            <field name="name">User: email changed</field>
            <field name="model_id" ref="base.model_res_users"/>
            <field name="auto_delete" eval="True"/>
            <field name="email_to">${object.email}</field>
            <field name="subject">Warning: your mail was modified</field>
            <field name="body_html"><![CDATA[
                <p>Dear ${object.name},<br/><br/>
                Your email was modified on ${ctx['timestamp']} by user ${ctx['user']}. ${object.email} ---> ${ctx['new_email']}.
                %if ctx['user'] == object:
                    If you don't remember doing such change, your account credential might be in wrong hands.
                %else:
                    If you don't know why ${ctx['user']} did this change, contact ${ctx['user']}.
                    If it appears that ${ctx['user']} didn't do this change, your account credentials might be in wrong hands.
                %endif
                </p>
                ]]>
            </field>
        </record>

    </data>
</odoo>